
(record note
       (note string))

(record file ;;Static files
       (path string)
       (size int)
       (filetype string))

;; Runtime Values:
(record int_value (value int))
(record bool_value (value bool))
(record real_value (value real))
(record string_value (value string))

;; Almost static input data:
(record person
       (print_name      string option)
       (family_name     string)
       (email           string)
       (note            note option)
       )

(record organism
       (name string)
       (note note option)
       )

(record sample
       (name        string)
       (organism    organism)
       (note        note option)
       )

(record bioo_barcode
       (vendor_id int)
       (barcode string))

(record truseq_barcode
       (vendor_id int)
       (barcode string))

(record protocol
       (name string)
       (dir file))

;; Functions:

(enumeration read_type read_type_PE read_type_SE)

(record library                  
       (investigator person)
       (contacts     person array)
       (vial_id        int)
       (name           string)
       (application    string)
       (stranded       bool)
       (control_type   string)
       (truseq_control bool)
       (rnaseq_control string)
       (bioo_barcodes bioo_barcode array)
       (truseq_barcodes truseq_barcode array)
       (read_type      read_type)
       (read_length1   int)
       (read_length2   int)
       )

(function library library_preparation
          (sample      sample)
          (protocol  protocol)
          (submitted_spreadsheet file)
          )

(record library_array
       (libraries library array))

(record lane
       (with_phix bool)
       (libraries library_array))

(record lane_array
       (lanes lane array))

(function lane lane_mix
          (libraries library_array))

(record flowcell
       (vendor_name string)
       (lanes lane_array))

(function flowcell flowcell_preparation
          (unique_name string_value)
          (lanes lane_array))

(record qpcr_result 
       (concentration real_value)
       (volume real_value))

(function qpcr_result qpcr
          (library library))

(record bioanalyzer_result
       (pdf file)
       (mean_fragment_size real))
(record agarose_gel_result
       (pdf file)
       (mean_fragment_size real))

(function bioanalyzer_result bioanalyzer
          (library library)
          (well_number int_value))

(function agarose_gel_result agarose_gel
          (library library)
          (well_number int_value))

(record hiseq_raw
        (data file))

(function hiseq_raw hiseq_run
          (flowcell flowcell)
          (keep_intensities bool_value)
          )

(record sample_sheet
        (csv_file file)
        )

(function sample_sheet assemble_sample_sheet
          (kind string_value) ;; All barcodes or not
          (flowcell flowcell)
          )

(record bcl_to_fastq_unaligned
        (unaligned file)
        )

(function bcl_to_fastq_unaligned bcl_to_fastq
          (raw_data hiseq_raw)
          (mismatch int_value)
          (version string_value)
          (sample_sheet file))


;; (function file fastqs_dir
;;           (unaligned file)
;;           (library library)
;;           )
;;  
;; (function file library_fastx_stats
;;           (library_fastqs file)
;;           (other_param int_value)
;;           (stats file)
;;           )
;;  
;; (value deliverable
;;        (fastq_dir file)
;;        (stats_dir file)
;;        (email_body string))
